<?xml version="1.0" encoding="utf-8"?>
<registry xmlns:i18n="http://xml.zope.org/namespaces/i18n"
          i18n:domain="senaite.referral">

  <!-- Control Panel (sin cambios) -->
  <records
      interface="senaite.referral.browser.controlpanel.IReferralControlPanel"
      prefix="senaite.referral" />

  <!-- ===== Recursos propios ===== -->
  <records
      interface="Products.CMFPlone.interfaces.resources.IResourceRegistry"
      prefix="plone.resources/infolabsa-css"
      purge="false">
    <value key="css">
      <element>++plone++senaite.referral.static/infolabsa.css</element>
    </value>
    <!-- Opcional: declarar dependencias si quieres que cargue después de core -->
    <value key="deps" />
  </records>

  <records
      interface="Products.CMFPlone.interfaces.resources.IResourceRegistry"
      prefix="plone.resources/infolabsa-js"
      purge="false">
    <value key="js">
      <element>++plone++senaite.referral.static/infolabsa.js</element>
    </value>
    <!-- Opcional: declarar dependencias si hiciera falta -->
    <value key="deps" />
  </records>

  <!-- ===== Bundles de SENAITE: mantener como ya lo tenías ===== -->
  <records
      interface="Products.CMFPlone.interfaces.resources.IBundleRegistry"
      prefix="plone.bundles/senaite.core.widgets"
      purge="false">
    <value key="resources" purge="false">
      <element>infolabsa-css</element>
      <element>infolabsa-js</element>
    </value>
    <!-- No forzamos compile aquí para no cambiar el comportamiento del sitio -->
  </records>

  <records
      interface="Products.CMFPlone.interfaces.resources.IBundleRegistry"
      prefix="plone.bundles/senaite.core"
      purge="false">
    <value key="resources" purge="false">
      <element>infolabsa-css</element>
      <element>infolabsa-js</element>
    </value>
  </records>

  <!-- ===== Cobertura extra (Plone global): default + logged-in ===== -->
  <records
      interface="Products.CMFPlone.interfaces.resources.IBundleRegistry"
      prefix="plone.bundles/default"
      purge="false">
    <value key="resources" purge="false">
      <element>infolabsa-css</element>
      <element>infolabsa-js</element>
    </value>
  </records>

  <records
      interface="Products.CMFPlone.interfaces.resources.IBundleRegistry"
      prefix="plone.bundles/logged-in"
      purge="false">
    <value key="resources" purge="false">
      <element>infolabsa-css</element>
      <element>infolabsa-js</element>
    </value>
  </records>

</registry>
